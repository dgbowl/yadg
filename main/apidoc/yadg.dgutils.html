<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>yadg.dgutils package &mdash; yadg 6.1.dev1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/autodoc_pydantic.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom_theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/yadg_ico.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=bb34e7df"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="yadg.extractors package" href="yadg.extractors.html" />
    <link rel="prev" title="yadg package" href="yadg.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            yadg
              <img src="../_static/yadg.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                6.1.dev1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">yadg user manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">How to install <strong>yadg</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">How to use <strong>yadg</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Key features of <strong>yadg</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing <strong>yadg</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">yadg extractors</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.example.html"><strong>example</strong>: For yadg testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.agilent.html"><strong>agilent</strong>: For Agilent chromatograms</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.basic.html"><strong>basic</strong>: For tabulated data</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.drycal.html"><strong>drycal</strong>: For MesaLabs Drycal Pro data</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.eclab.html"><strong>eclab</strong>: For BioLogic data files</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.empalc.html"><strong>empalc</strong>: For Empa’s LC data</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.ezchrom.html"><strong>ezchrom</strong>: For EZChrom chromatograms</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.fhimcpt.html"><strong>fhimcpt</strong>: For MCPT set-up at FHI</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.fusion.html"><strong>fusion</strong>: For Fusion chromatograms</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.panalytical.html"><strong>panalytical</strong>: For Panalytical XRD data</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.phi.html"><strong>phi</strong>: For Phi XPS data</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.picolog.html"><strong>picolog</strong>: For PicoTech PicoLog data</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.quadstar.html"><strong>quadstar</strong>: For Quadstar MS data</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.tomato.html"><strong>tomato</strong>: For tomato outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="yadg.extractors.touchstone.html"><strong>touchstone</strong>: For Touchstone VNA files</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">yadg developer manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../devdocs.html">Developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../version.html"><strong>yadg</strong> version history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../objects.html"><strong>yadg</strong> objects</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="yadg.html">yadg package</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="yadg.html#yadg.run_with_arguments"><code class="docutils literal notranslate"><span class="pre">run_with_arguments()</span></code></a></li>
<li class="toctree-l2 current"><a class="reference internal" href="yadg.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">yadg.dgutils package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.get_yadg_metadata"><code class="docutils literal notranslate"><span class="pre">get_yadg_metadata()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.now"><code class="docutils literal notranslate"><span class="pre">now()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.infer_timestamp_from"><code class="docutils literal notranslate"><span class="pre">infer_timestamp_from()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.str_to_uts"><code class="docutils literal notranslate"><span class="pre">str_to_uts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.ole_to_uts"><code class="docutils literal notranslate"><span class="pre">ole_to_uts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.complete_timestamps"><code class="docutils literal notranslate"><span class="pre">complete_timestamps()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.complete_uts"><code class="docutils literal notranslate"><span class="pre">complete_uts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.update_schema"><code class="docutils literal notranslate"><span class="pre">update_schema()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.schema_from_preset"><code class="docutils literal notranslate"><span class="pre">schema_from_preset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.read_value"><code class="docutils literal notranslate"><span class="pre">read_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.sanitize_units"><code class="docutils literal notranslate"><span class="pre">sanitize_units()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.dicts_to_dataset"><code class="docutils literal notranslate"><span class="pre">dicts_to_dataset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.append_dicts"><code class="docutils literal notranslate"><span class="pre">append_dicts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.merge_dicttrees"><code class="docutils literal notranslate"><span class="pre">merge_dicttrees()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yadg.dgutils.merge_meta"><code class="docutils literal notranslate"><span class="pre">merge_meta()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-yadg.dgutils.btools">yadg.dgutils.btools module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-yadg.dgutils.dateutils">yadg.dgutils.dateutils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-yadg.dgutils.dsutils">yadg.dgutils.dsutils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-yadg.dgutils.helpers">yadg.dgutils.helpers module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-yadg.dgutils.pintutils">yadg.dgutils.pintutils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-yadg.dgutils.schemautils">yadg.dgutils.schemautils module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="yadg.extractors.html">yadg.extractors package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="yadg.html#module-yadg.core">yadg.core module</a></li>
<li class="toctree-l2"><a class="reference internal" href="yadg.html#module-yadg.main">yadg.main module</a></li>
<li class="toctree-l2"><a class="reference internal" href="yadg.html#module-yadg.subcommands">yadg.subcommands module</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">yadg</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="yadg.html">yadg package</a></li>
      <li class="breadcrumb-item active">yadg.dgutils package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/apidoc/yadg.dgutils.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-yadg.dgutils">
<span id="yadg-dgutils-package"></span><h1>yadg.dgutils package<a class="headerlink" href="#module-yadg.dgutils" title="Link to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.get_yadg_metadata">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">get_yadg_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#yadg.dgutils.get_yadg_metadata" title="Link to this definition"></a></dt>
<dd><p>Returns current <strong>yadg</strong> metadata.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.now">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">now</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asstr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">timezone</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">datetime.timezone.utc</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></span><a class="headerlink" href="#yadg.dgutils.now" title="Link to this definition"></a></dt>
<dd><p>Wrapper around datetime.now()</p>
<p>A convenience function for returning the current time as a ISO 8601 or as a Unix
timestamp.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.infer_timestamp_from">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">infer_timestamp_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.timestamp.TimestampSpec" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">TimestampSpec</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#yadg.dgutils.infer_timestamp_from" title="Link to this definition"></a></dt>
<dd><p>Convenience function for timestamping</p>
<p>Given a set of headers, and an optional specification, return an array containing
column indices from which a timestamp in a given row can be computed, as well as the
function which will compute the timestamp given the returned array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>headers</strong> – An array of strings. If <cite>spec</cite> is not supplied, must contain either “uts”
<code class="xref py py-class docutils literal notranslate"><span class="pre">(float)</span></code> or “timestep” <code class="xref py py-class docutils literal notranslate"><span class="pre">(str)</span></code> (conforming to ISO 8601).</p></li>
<li><p><strong>spec</strong> – A specification of timestamp elements with associated column indices and
optional formats. Currently accepted combinations of keys are: “uts”;
“timestamp”; “date” and / or “time”.</p></li>
<li><p><strong>tz</strong> – Timezone to use for conversion. By default, UTC is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>(datecolumns, datefunc, fulldate)</strong> – A tuple containing a list of indices of columns, a Callable to which the
columns have to be passed to obtain a uts timestamp, and whether the determined
timestamp is full or partial.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[list, Callable, bool]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.str_to_uts">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">str_to_uts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#yadg.dgutils.str_to_uts" title="Link to this definition"></a></dt>
<dd><p>Converts a string to POSIX timestamp.</p>
<p>If the optional <code class="docutils literal notranslate"><span class="pre">format</span></code> is specified, the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> string is processed
using the <code class="xref py py-func docutils literal notranslate"><span class="pre">datetime.datetime.strptime()</span></code> function; if no <code class="docutils literal notranslate"><span class="pre">format</span></code> is
supplied, an ISO 8601 format is assumed and an attempt to parse using
<code class="xref py py-func docutils literal notranslate"><span class="pre">dateutil.parser.parse()</span></code> is made.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> – A string containing the timestamp.</p></li>
<li><p><strong>format</strong> – Optional format string for parsing of the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p></li>
<li><p><strong>timezone</strong> – Optional timezone of the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>. By default, “UTC”.</p></li>
<li><p><strong>strict</strong> – Whether to re-raise any parsing errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>uts</strong> – Returns the POSIX timestamp if successful, otherwise None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.ole_to_uts">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">ole_to_uts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ole_timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#yadg.dgutils.ole_to_uts" title="Link to this definition"></a></dt>
<dd><p>Converts a Microsoft OLE timestamp into a POSIX timestamp.</p>
<p>The OLE automation date format is a floating point value, counting
days since midnight 30 December 1899. Hours and minutes are
represented as fractional days.</p>
<p><a class="reference external" href="https://devblogs.microsoft.com/oldnewthing/20030905-02/?p=42653">https://devblogs.microsoft.com/oldnewthing/20030905-02/?p=42653</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ole_timestamp</strong> – A timestamp in Microsoft OLE format.</p></li>
<li><p><strong>timezone</strong> – String desribing the timezone.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>time</strong> – The corresponding Unix timestamp.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.complete_timestamps">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">complete_timestamps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timesteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.externaldate.ExternalDate" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">ExternalDate</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#yadg.dgutils.complete_timestamps" title="Link to this definition"></a></dt>
<dd><p>Timestamp completing function.</p>
<p>This function allows for completing or overriding the uts timestamps determined by
the individual parsers. <strong>yadg</strong> enters this function for any parser which does not
return a full timestamp, as well as if the <code class="docutils literal notranslate"><span class="pre">externaldate</span></code> specification is
specified by the user.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">externaldate</span></code> specification is as follows:</p>
<dl class="py class pydantic_model">
<dt class="sig sig-object py">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dgbowl_schemas.yadg.dataschema_5_0.externaldate.</span></span><span class="sig-name descname"><span class="pre">ExternalDate</span></span></dt>
<dd><p>Supply timestamping information that are external to the processed file.</p>
<dl class="field-list simple">
<dt class="field-odd">Config<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>extra</strong>: <em>str = forbid</em></p></li>
</ul>
</dd>
</dl>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">using</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.externaldate.ExternalDateFile" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">ExternalDateFile</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.externaldate.ExternalDateFilename" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">ExternalDateFilename</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.externaldate.ExternalDateISOString" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">ExternalDateISOString</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.externaldate.ExternalDateUTSOffset" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">ExternalDateUTSOffset</span></a></em><em class="property"> <span class="pre">[Required]</span></em></dt>
<dd><p>Specification of the external date format.</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'add'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'replace'</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'add'</span></em></dt>
<dd><p>Whether the external timestamps should be added to or should replace the
parsed data.</p>
</dd></dl>

</dd></dl>

<p>The <code class="docutils literal notranslate"><span class="pre">using</span></code> key specifies how an external timestamp is created. Only one entry in
<code class="docutils literal notranslate"><span class="pre">using</span></code> is permitted. By default, this entry is:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">using</span><span class="p">:</span>
<span class="w">  </span><span class="nt">filename</span><span class="p">:</span>
<span class="w">    </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;%Y-%m-%d-%H-%M-%S&quot;</span>
<span class="w">    </span><span class="nt">len</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">19</span>
</pre></div>
</div>
<p>Which means the code will attempt to deduce the timestamp from the path of the
processed file (<code class="docutils literal notranslate"><span class="pre">fn</span></code>), using the first 19 characters of the base filename
according to the above format (eg. “2021-12-31-13-45-00”).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">file</span></code> is specified, the handling of timestamps is handed off to
<code class="xref py py-func docutils literal notranslate"><span class="pre">timestamps_from_file()</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mode</span></code> key specifies whether the offsets determined in this function are
added to the current timestamps (eg. date offset being added to time) or whether
they should replace the existing timestamps completely.</p>
<p>As a measure of last resort, the <code class="docutils literal notranslate"><span class="pre">mtime</span></code> of the <code class="docutils literal notranslate"><span class="pre">fn</span></code> is used. <code class="docutils literal notranslate"><span class="pre">mtime</span></code> is
preferred to <code class="docutils literal notranslate"><span class="pre">ctime</span></code>, as the former has a more consistent cross-platform
behaviour.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timesteps</strong> – A list of timesteps generated from a single file, <code class="docutils literal notranslate"><span class="pre">fn</span></code>.</p></li>
<li><p><strong>fn</strong> – Filename used to create <code class="docutils literal notranslate"><span class="pre">timesteps</span></code>.</p></li>
<li><p><strong>spec</strong> – <code class="docutils literal notranslate"><span class="pre">externaldate</span></code> specification part of the <cite>schema</cite>.</p></li>
<li><p><strong>timezone</strong> – Timezone, defaults to “UTC”.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.complete_uts">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">complete_uts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.6.1)"><span class="pre">Dataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">externaldate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.6.1)"><span class="pre">Dataset</span></a></span></span><a class="headerlink" href="#yadg.dgutils.complete_uts" title="Link to this definition"></a></dt>
<dd><p>A helper function ensuring that the Dataset <code class="docutils literal notranslate"><span class="pre">ds</span></code> contains a dimension <code class="docutils literal notranslate"><span class="pre">&quot;uts&quot;</span></code>,
and that the timestamps in <code class="docutils literal notranslate"><span class="pre">&quot;uts&quot;</span></code> are completed as instructed in the
<code class="docutils literal notranslate"><span class="pre">externaldate</span></code> specification.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.update_schema">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">update_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BaseModel</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BaseModel</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_6_0.html#dgbowl_schemas.yadg.dataschema_6_0.DataSchema" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">DataSchema</span></a></span></span><a class="headerlink" href="#yadg.dgutils.update_schema" title="Link to this definition"></a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">yadg</span> <span class="pre">update</span></code> worker function.</p>
<p>The main purpose is to allow a simple update pathway from older versions of
dataschema files to the current latest and greatest.</p>
<p>Currently supports:</p>
<blockquote>
<div><ul class="simple">
<li><p>updating dataschema version 3.1 to 4.0 using routines in <code class="docutils literal notranslate"><span class="pre">yadg</span></code>,</p></li>
<li><p>updating dataschema version 4.0 and above to the latest dataschema using the
in-built <code class="docutils literal notranslate"><span class="pre">.update()</span></code> mechanism.</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>object</strong> – The object to be updated</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>newobj</strong> – The updated and validated <cite>“datagram”</cite> or <cite>“schema”</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.schema_from_preset">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">schema_from_preset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">preset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_6_0.html#dgbowl_schemas.yadg.dataschema_6_0.DataSchema" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">DataSchema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_6_0.html#dgbowl_schemas.yadg.dataschema_6_0.DataSchema" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">DataSchema</span></a></span></span><a class="headerlink" href="#yadg.dgutils.schema_from_preset" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.read_value">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">read_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'windows-1252'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#yadg.dgutils.read_value" title="Link to this definition"></a></dt>
<dd><p>Reads a single value or a set of values from a buffer at a certain offset.</p>
<p>Just a handy wrapper for np.frombuffer(…, count=1) With the added benefit of
allowing the ‘pascal’ keyword as an indicator for a length-prefixed
string.</p>
<p>The read value is converted to a built-in datatype using
np.dtype.item().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – An object that exposes the buffer interface. Here always bytes.</p></li>
<li><p><strong>offset</strong> – Start reading the buffer from this offset (in bytes).</p></li>
<li><p><strong>dtype</strong> – Data-type to read in.</p></li>
<li><p><strong>encoding</strong> – The encoding of the bytes to be converted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unpacked and converted value from the buffer.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.sanitize_units">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">sanitize_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#yadg.dgutils.sanitize_units" title="Link to this definition"></a></dt>
<dd><p>Unit sanitizer.</p>
<p>This sanitizer should be used where user-supplied units are likely to occur,
such as in the parsers <a class="reference internal" href="yadg.extractors.basic.html#module-yadg.extractors.basic.csv" title="yadg.extractors.basic.csv"><code class="xref py py-mod docutils literal notranslate"><span class="pre">yadg.extractors.basic.csv</span></code></a>. Currently, only two
replacements are done:</p>
<blockquote>
<div><ul class="simple">
<li><p>“Bar” is replaced with “bar”</p></li>
<li><p>“Deg C” is replace with “degC</p></li>
</ul>
</div></blockquote>
<p>Use with caution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>units</strong> – Object containing string units.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dicts_to_dataset">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">dicts_to_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fulldate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.6.1)"><span class="pre">Dataset</span></a></span></span><a class="headerlink" href="#yadg.dgutils.dicts_to_dataset" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.append_dicts">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">append_dicts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">devs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">li</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#yadg.dgutils.append_dicts" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.merge_dicttrees">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">merge_dicttrees</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fvals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#yadg.dgutils.merge_dicttrees" title="Link to this definition"></a></dt>
<dd><p>A helper function that merges two <code class="docutils literal notranslate"><span class="pre">DataTree.to_dict()</span></code> objects by concatenating
the new values in <code class="docutils literal notranslate"><span class="pre">fvals</span></code> to the existing ones in <code class="docutils literal notranslate"><span class="pre">vals</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.merge_meta">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.</span></span><span class="sig-name descname"><span class="pre">merge_meta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yadg.dgutils.merge_meta" title="Link to this definition"></a></dt>
<dd></dd></dl>

<section id="module-yadg.dgutils.btools">
<span id="yadg-dgutils-btools-module"></span><h2>yadg.dgutils.btools module<a class="headerlink" href="#module-yadg.dgutils.btools" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.btools.read_pascal_string">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.btools.</span></span><span class="sig-name descname"><span class="pre">read_pascal_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pascal_bytes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'windows-1252'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#yadg.dgutils.btools.read_pascal_string" title="Link to this definition"></a></dt>
<dd><p>Parses a length-prefixed string given some encoding.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bytes</strong> – The bytes of the string starting at the length-prefix byte.</p></li>
<li><p><strong>encoding</strong> – The encoding of the string to be converted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The string decoded from the input bytes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.btools.read_value">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.btools.</span></span><span class="sig-name descname"><span class="pre">read_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'windows-1252'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#yadg.dgutils.btools.read_value" title="Link to this definition"></a></dt>
<dd><p>Reads a single value or a set of values from a buffer at a certain offset.</p>
<p>Just a handy wrapper for np.frombuffer(…, count=1) With the added benefit of
allowing the ‘pascal’ keyword as an indicator for a length-prefixed
string.</p>
<p>The read value is converted to a built-in datatype using
np.dtype.item().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – An object that exposes the buffer interface. Here always bytes.</p></li>
<li><p><strong>offset</strong> – Start reading the buffer from this offset (in bytes).</p></li>
<li><p><strong>dtype</strong> – Data-type to read in.</p></li>
<li><p><strong>encoding</strong> – The encoding of the bytes to be converted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unpacked and converted value from the buffer.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-yadg.dgutils.dateutils">
<span id="yadg-dgutils-dateutils-module"></span><h2>yadg.dgutils.dateutils module<a class="headerlink" href="#module-yadg.dgutils.dateutils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dateutils.now">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dateutils.</span></span><span class="sig-name descname"><span class="pre">now</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asstr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">timezone</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">datetime.timezone.utc</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></span><a class="headerlink" href="#yadg.dgutils.dateutils.now" title="Link to this definition"></a></dt>
<dd><p>Wrapper around datetime.now()</p>
<p>A convenience function for returning the current time as a ISO 8601 or as a Unix
timestamp.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dateutils.ole_to_uts">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dateutils.</span></span><span class="sig-name descname"><span class="pre">ole_to_uts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ole_timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#yadg.dgutils.dateutils.ole_to_uts" title="Link to this definition"></a></dt>
<dd><p>Converts a Microsoft OLE timestamp into a POSIX timestamp.</p>
<p>The OLE automation date format is a floating point value, counting
days since midnight 30 December 1899. Hours and minutes are
represented as fractional days.</p>
<p><a class="reference external" href="https://devblogs.microsoft.com/oldnewthing/20030905-02/?p=42653">https://devblogs.microsoft.com/oldnewthing/20030905-02/?p=42653</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ole_timestamp</strong> – A timestamp in Microsoft OLE format.</p></li>
<li><p><strong>timezone</strong> – String desribing the timezone.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>time</strong> – The corresponding Unix timestamp.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dateutils.str_to_uts">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dateutils.</span></span><span class="sig-name descname"><span class="pre">str_to_uts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#yadg.dgutils.dateutils.str_to_uts" title="Link to this definition"></a></dt>
<dd><p>Converts a string to POSIX timestamp.</p>
<p>If the optional <code class="docutils literal notranslate"><span class="pre">format</span></code> is specified, the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> string is processed
using the <code class="xref py py-func docutils literal notranslate"><span class="pre">datetime.datetime.strptime()</span></code> function; if no <code class="docutils literal notranslate"><span class="pre">format</span></code> is
supplied, an ISO 8601 format is assumed and an attempt to parse using
<code class="xref py py-func docutils literal notranslate"><span class="pre">dateutil.parser.parse()</span></code> is made.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> – A string containing the timestamp.</p></li>
<li><p><strong>format</strong> – Optional format string for parsing of the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p></li>
<li><p><strong>timezone</strong> – Optional timezone of the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>. By default, “UTC”.</p></li>
<li><p><strong>strict</strong> – Whether to re-raise any parsing errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>uts</strong> – Returns the POSIX timestamp if successful, otherwise None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dateutils.infer_timestamp_from">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dateutils.</span></span><span class="sig-name descname"><span class="pre">infer_timestamp_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.timestamp.TimestampSpec" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">TimestampSpec</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#yadg.dgutils.dateutils.infer_timestamp_from" title="Link to this definition"></a></dt>
<dd><p>Convenience function for timestamping</p>
<p>Given a set of headers, and an optional specification, return an array containing
column indices from which a timestamp in a given row can be computed, as well as the
function which will compute the timestamp given the returned array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>headers</strong> – An array of strings. If <cite>spec</cite> is not supplied, must contain either “uts”
<code class="xref py py-class docutils literal notranslate"><span class="pre">(float)</span></code> or “timestep” <code class="xref py py-class docutils literal notranslate"><span class="pre">(str)</span></code> (conforming to ISO 8601).</p></li>
<li><p><strong>spec</strong> – A specification of timestamp elements with associated column indices and
optional formats. Currently accepted combinations of keys are: “uts”;
“timestamp”; “date” and / or “time”.</p></li>
<li><p><strong>tz</strong> – Timezone to use for conversion. By default, UTC is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>(datecolumns, datefunc, fulldate)</strong> – A tuple containing a list of indices of columns, a Callable to which the
columns have to be passed to obtain a uts timestamp, and whether the determined
timestamp is full or partial.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[list, Callable, bool]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dateutils.complete_timestamps">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dateutils.</span></span><span class="sig-name descname"><span class="pre">complete_timestamps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timesteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.externaldate.ExternalDate" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">ExternalDate</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#yadg.dgutils.dateutils.complete_timestamps" title="Link to this definition"></a></dt>
<dd><p>Timestamp completing function.</p>
<p>This function allows for completing or overriding the uts timestamps determined by
the individual parsers. <strong>yadg</strong> enters this function for any parser which does not
return a full timestamp, as well as if the <code class="docutils literal notranslate"><span class="pre">externaldate</span></code> specification is
specified by the user.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">externaldate</span></code> specification is as follows:</p>
<dl class="py class pydantic_model">
<dt class="sig sig-object py">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dgbowl_schemas.yadg.dataschema_5_0.externaldate.</span></span><span class="sig-name descname"><span class="pre">ExternalDate</span></span></dt>
<dd><p>Supply timestamping information that are external to the processed file.</p>
<dl class="field-list simple">
<dt class="field-odd">Config<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>extra</strong>: <em>str = forbid</em></p></li>
</ul>
</dd>
</dl>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">using</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.externaldate.ExternalDateFile" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">ExternalDateFile</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.externaldate.ExternalDateFilename" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">ExternalDateFilename</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.externaldate.ExternalDateISOString" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">ExternalDateISOString</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_5_0.html#dgbowl_schemas.yadg.dataschema_5_0.externaldate.ExternalDateUTSOffset" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">ExternalDateUTSOffset</span></a></em><em class="property"> <span class="pre">[Required]</span></em></dt>
<dd><p>Specification of the external date format.</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'add'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'replace'</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'add'</span></em></dt>
<dd><p>Whether the external timestamps should be added to or should replace the
parsed data.</p>
</dd></dl>

</dd></dl>

<p>The <code class="docutils literal notranslate"><span class="pre">using</span></code> key specifies how an external timestamp is created. Only one entry in
<code class="docutils literal notranslate"><span class="pre">using</span></code> is permitted. By default, this entry is:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">using</span><span class="p">:</span>
<span class="w">  </span><span class="nt">filename</span><span class="p">:</span>
<span class="w">    </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;%Y-%m-%d-%H-%M-%S&quot;</span>
<span class="w">    </span><span class="nt">len</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">19</span>
</pre></div>
</div>
<p>Which means the code will attempt to deduce the timestamp from the path of the
processed file (<code class="docutils literal notranslate"><span class="pre">fn</span></code>), using the first 19 characters of the base filename
according to the above format (eg. “2021-12-31-13-45-00”).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">file</span></code> is specified, the handling of timestamps is handed off to
<a class="reference internal" href="#yadg.dgutils.dateutils.timestamps_from_file" title="yadg.dgutils.dateutils.timestamps_from_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">timestamps_from_file()</span></code></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mode</span></code> key specifies whether the offsets determined in this function are
added to the current timestamps (eg. date offset being added to time) or whether
they should replace the existing timestamps completely.</p>
<p>As a measure of last resort, the <code class="docutils literal notranslate"><span class="pre">mtime</span></code> of the <code class="docutils literal notranslate"><span class="pre">fn</span></code> is used. <code class="docutils literal notranslate"><span class="pre">mtime</span></code> is
preferred to <code class="docutils literal notranslate"><span class="pre">ctime</span></code>, as the former has a more consistent cross-platform
behaviour.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timesteps</strong> – A list of timesteps generated from a single file, <code class="docutils literal notranslate"><span class="pre">fn</span></code>.</p></li>
<li><p><strong>fn</strong> – Filename used to create <code class="docutils literal notranslate"><span class="pre">timesteps</span></code>.</p></li>
<li><p><strong>spec</strong> – <code class="docutils literal notranslate"><span class="pre">externaldate</span></code> specification part of the <cite>schema</cite>.</p></li>
<li><p><strong>timezone</strong> – Timezone, defaults to “UTC”.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dateutils.timestamps_from_file">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dateutils.</span></span><span class="sig-name descname"><span class="pre">timestamps_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#yadg.dgutils.dateutils.timestamps_from_file" title="Link to this definition"></a></dt>
<dd><p>Load timestamps from file.</p>
<p>This function enables loading timestamps from file specified by the <code class="docutils literal notranslate"><span class="pre">path</span></code>.
The currently supported file formats include <code class="docutils literal notranslate"><span class="pre">json</span></code> and <code class="docutils literal notranslate"><span class="pre">pkl</span></code>, which must
contain a top-level <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code> with a key that is matched by <code class="docutils literal notranslate"><span class="pre">match</span></code>,
or a top-level <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>, both containing <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>
-like objects that can be processed into an Unix timestamp.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Location of the external file.</p></li>
<li><p><strong>type</strong> – Type of the external file. Currently, <code class="docutils literal notranslate"><span class="pre">&quot;json&quot;,</span> <span class="pre">&quot;pkl&quot;</span></code> are supported.</p></li>
<li><p><strong>match</strong> – An optional key to match if the object in <code class="docutils literal notranslate"><span class="pre">path</span></code> is a <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>.</p></li>
<li><p><strong>timezone</strong> – An optional timezone string, defaults to “UTC”</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>parseddata</strong> – A single or a list of POSIX timestamps.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float | list[float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dateutils.complete_uts">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dateutils.</span></span><span class="sig-name descname"><span class="pre">complete_uts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.6.1)"><span class="pre">Dataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">externaldate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.6.1)"><span class="pre">Dataset</span></a></span></span><a class="headerlink" href="#yadg.dgutils.dateutils.complete_uts" title="Link to this definition"></a></dt>
<dd><p>A helper function ensuring that the Dataset <code class="docutils literal notranslate"><span class="pre">ds</span></code> contains a dimension <code class="docutils literal notranslate"><span class="pre">&quot;uts&quot;</span></code>,
and that the timestamps in <code class="docutils literal notranslate"><span class="pre">&quot;uts&quot;</span></code> are completed as instructed in the
<code class="docutils literal notranslate"><span class="pre">externaldate</span></code> specification.</p>
</dd></dl>

</section>
<section id="module-yadg.dgutils.dsutils">
<span id="yadg-dgutils-dsutils-module"></span><h2>yadg.dgutils.dsutils module<a class="headerlink" href="#module-yadg.dgutils.dsutils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dsutils.append_dicts">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dsutils.</span></span><span class="sig-name descname"><span class="pre">append_dicts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">devs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">li</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#yadg.dgutils.dsutils.append_dicts" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dsutils.dicts_to_dataset">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dsutils.</span></span><span class="sig-name descname"><span class="pre">dicts_to_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fulldate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.6.1)"><span class="pre">Dataset</span></a></span></span><a class="headerlink" href="#yadg.dgutils.dsutils.dicts_to_dataset" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dsutils.merge_dicttrees">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dsutils.</span></span><span class="sig-name descname"><span class="pre">merge_dicttrees</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fvals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#yadg.dgutils.dsutils.merge_dicttrees" title="Link to this definition"></a></dt>
<dd><p>A helper function that merges two <code class="docutils literal notranslate"><span class="pre">DataTree.to_dict()</span></code> objects by concatenating
the new values in <code class="docutils literal notranslate"><span class="pre">fvals</span></code> to the existing ones in <code class="docutils literal notranslate"><span class="pre">vals</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.dsutils.merge_meta">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.dsutils.</span></span><span class="sig-name descname"><span class="pre">merge_meta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yadg.dgutils.dsutils.merge_meta" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-yadg.dgutils.helpers">
<span id="yadg-dgutils-helpers-module"></span><h2>yadg.dgutils.helpers module<a class="headerlink" href="#module-yadg.dgutils.helpers" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.helpers.get_yadg_metadata">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.helpers.</span></span><span class="sig-name descname"><span class="pre">get_yadg_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#yadg.dgutils.helpers.get_yadg_metadata" title="Link to this definition"></a></dt>
<dd><p>Returns current <strong>yadg</strong> metadata.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.helpers.deprecated">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.helpers.</span></span><span class="sig-name descname"><span class="pre">deprecated</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'4.2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'5.0'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#yadg.dgutils.helpers.deprecated" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-yadg.dgutils.pintutils">
<span id="yadg-dgutils-pintutils-module"></span><h2>yadg.dgutils.pintutils module<a class="headerlink" href="#module-yadg.dgutils.pintutils" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pint</span></code> compatibility functions in <strong>yadg</strong>.</p>
<p>This package defines <code class="docutils literal notranslate"><span class="pre">ureg</span></code>, a <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.UnitRegistry</span></code> used for validation of
<cite>datagrams</cite> in <strong>yadg</strong>. The default SI <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.UnitRegistry</span></code> is extended
by definitions of fractional quantities (%, ppm, etc.), standard volumetric
quantities (smL/min, sccm), and other dimensionless “units” present in several
file types.</p>
<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.pintutils.sanitize_units">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.pintutils.</span></span><span class="sig-name descname"><span class="pre">sanitize_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#yadg.dgutils.pintutils.sanitize_units" title="Link to this definition"></a></dt>
<dd><p>Unit sanitizer.</p>
<p>This sanitizer should be used where user-supplied units are likely to occur,
such as in the parsers <a class="reference internal" href="yadg.extractors.basic.html#module-yadg.extractors.basic.csv" title="yadg.extractors.basic.csv"><code class="xref py py-mod docutils literal notranslate"><span class="pre">yadg.extractors.basic.csv</span></code></a>. Currently, only two
replacements are done:</p>
<blockquote>
<div><ul class="simple">
<li><p>“Bar” is replaced with “bar”</p></li>
<li><p>“Deg C” is replace with “degC</p></li>
</ul>
</div></blockquote>
<p>Use with caution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>units</strong> – Object containing string units.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-yadg.dgutils.schemautils">
<span id="yadg-dgutils-schemautils-module"></span><h2>yadg.dgutils.schemautils module<a class="headerlink" href="#module-yadg.dgutils.schemautils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.schemautils.calib_3to4">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.schemautils.</span></span><span class="sig-name descname"><span class="pre">calib_3to4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oldcal</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#yadg.dgutils.schemautils.calib_3to4" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.schemautils.schema_3to4">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.schemautils.</span></span><span class="sig-name descname"><span class="pre">schema_3to4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oldschema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#yadg.dgutils.schemautils.schema_3to4" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.schemautils.update_schema">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.schemautils.</span></span><span class="sig-name descname"><span class="pre">update_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BaseModel</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BaseModel</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_6_0.html#dgbowl_schemas.yadg.dataschema_6_0.DataSchema" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">DataSchema</span></a></span></span><a class="headerlink" href="#yadg.dgutils.schemautils.update_schema" title="Link to this definition"></a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">yadg</span> <span class="pre">update</span></code> worker function.</p>
<p>The main purpose is to allow a simple update pathway from older versions of
dataschema files to the current latest and greatest.</p>
<p>Currently supports:</p>
<blockquote>
<div><ul class="simple">
<li><p>updating dataschema version 3.1 to 4.0 using routines in <code class="docutils literal notranslate"><span class="pre">yadg</span></code>,</p></li>
<li><p>updating dataschema version 4.0 and above to the latest dataschema using the
in-built <code class="docutils literal notranslate"><span class="pre">.update()</span></code> mechanism.</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>object</strong> – The object to be updated</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>newobj</strong> – The updated and validated <cite>“datagram”</cite> or <cite>“schema”</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yadg.dgutils.schemautils.schema_from_preset">
<span class="sig-prename descclassname"><span class="pre">yadg.dgutils.schemautils.</span></span><span class="sig-name descname"><span class="pre">schema_from_preset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">preset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_6_0.html#dgbowl_schemas.yadg.dataschema_6_0.DataSchema" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">DataSchema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://dgbowl.github.io/dgbowl-schemas/main/apidoc/dgbowl_schemas.yadg.dataschema_6_0.html#dgbowl_schemas.yadg.dataschema_6_0.DataSchema" title="(in dgbowl-schemas v124rc2.dev1)"><span class="pre">DataSchema</span></a></span></span><a class="headerlink" href="#yadg.dgutils.schemautils.schema_from_preset" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="yadg.html" class="btn btn-neutral float-left" title="yadg package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="yadg.extractors.html" class="btn btn-neutral float-right" title="yadg.extractors package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021 - 2025, yadg authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Other Versions</span>
      v: 6.1.dev1
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions"> 
      <script src="../versions.js"></script>
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>