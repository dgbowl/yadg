<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>What is a schema &mdash; yadg master documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/yadg_ico.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="What is a datagram" href="object.datagram.html" />
    <link rel="prev" title="yadg objects" href="objects.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> yadg
            <img src="_static/yadg.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                master
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Yadg features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage.html"><strong>yadg</strong> usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html"><strong>yadg</strong> features</a></li>
<li class="toctree-l1"><a class="reference internal" href="parsers.html"><strong>yadg</strong> parsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html"><strong>yadg</strong> version history</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Yadg components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="devdocs.html">Developer documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="objects.html"><strong>yadg</strong> objects</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">What is a <cite>schema</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="object.datagram.html">What is a <cite>datagram</cite></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html"><strong>yadg</strong> autodocs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">yadg</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="objects.html"><strong>yadg</strong> objects</a> &raquo;</li>
      <li>What is a <cite>schema</cite></li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/object.schema.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="what-is-a-schema">
<span id="object-schema"></span><h1>What is a <cite>schema</cite><a class="headerlink" href="#what-is-a-schema" title="Permalink to this headline"></a></h1>
<p>A <cite>schema</cite> is an object defining the files and folders to be processed by
<strong>yadg</strong>, as well as the types of parsers and the parser options to be applied.
One can think of a <cite>schema</cite> as a representation of a single experiment,
containing measurements from multiple sources (or devices) and following a
succession of experimental <cite>steps</cite>.</p>
<div class="admonition-todo admonition">
<p class="admonition-title">TODO</p>
<p><a class="reference external" href="https://gitlab.empa.ch/krpe/yadg/-/issues/8">https://gitlab.empa.ch/krpe/yadg/-/issues/8</a></p>
<p>The syntax of <cite>schema</cite> will change from a json dictionary to a YAML file
in version 5.0.</p>
</div>
<p>An example is a simple catalytic test with a temperature ramp. The goal of such
an experiment may be to measure the catalytic conversion as a function of
temperature, and then calculate the activation energy of the catalytic reaction.
The monitored devices and their filetypes are:</p>
<ul class="simple">
<li><p>the inlet flow and pressure meters -&gt; <code class="docutils literal notranslate"><span class="pre">csv</span></code> data in <code class="docutils literal notranslate"><span class="pre">foo.csv</span></code></p></li>
<li><p>the temperature controller -&gt; <code class="docutils literal notranslate"><span class="pre">csv</span></code> data in <code class="docutils literal notranslate"><span class="pre">bar.csv</span></code></p></li>
<li><p>the gas chromatograph -&gt; Fusion <code class="docutils literal notranslate"><span class="pre">json</span></code> data in <code class="docutils literal notranslate"><span class="pre">./GC/</span></code> folder</p></li>
</ul>
<p>Despite these three devices measuring concurrently, we would have to specify
three separate <cite>steps</cite> in the schema to process all relevant output files:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;provenance&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;manual&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;schema_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;parser&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basiccsv&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo.csv&quot;</span><span class="p">]},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;flow&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="p">},{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;parser&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basiccsv&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;bar.csv&quot;</span><span class="p">]}</span><span class="w"></span>
<span class="w">    </span><span class="p">},{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;parser&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;chromtrace&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;folders&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;./GC/&quot;</span><span class="p">]},</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;tracetype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fusion&quot;</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>A valid <cite>schema</cite> is therefore a <code class="xref py py-class docutils literal notranslate"><span class="pre">(dict)</span></code>, with a top-level <code class="docutils literal notranslate"><span class="pre">&quot;metadata&quot;</span></code>
entry describing the schema provenance and version; and a top-level <code class="docutils literal notranslate"><span class="pre">&quot;steps&quot;</span></code>
entry, which is a <code class="xref py py-class docutils literal notranslate"><span class="pre">(list)</span></code> containing the definitions for the experimental
<cite>steps</cite>. Each <cite>step</cite> within the <cite>schema</cite> is a <code class="xref py py-class docutils literal notranslate"><span class="pre">(dict)</span></code>. In each <cite>step</cite>,
the entries <code class="docutils literal notranslate"><span class="pre">&quot;parser&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;import&quot;</span></code> have to be specified, telling <strong>yadg</strong>
which <cite>parser</cite> to use and which files or folders to process, respectively.</p>
<p>Other allowed entries are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;tag&quot;</span></code> <code class="xref py py-class docutils literal notranslate"><span class="pre">(str)</span></code>, a tag describing a certain <cite>step</cite>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;export&quot;</span></code> <code class="xref py py-class docutils literal notranslate"><span class="pre">(str)</span></code>, a path defining the location for individual
export of <cite>steps</cite>; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;parameters&quot;</span></code> <code class="xref py py-class docutils literal notranslate"><span class="pre">(dict)</span></code>, an object for specifying additional
parameters for the <cite>parser</cite>.</p></li>
</ul>
<p>However, a <cite>schema</cite> can contain more than one <cite>step</cite> with the same <code class="docutils literal notranslate"><span class="pre">&quot;parser&quot;</span></code>
entry. This is valuable if one wants to split a certain timeseries into smaller
chunks – in the above example, if we want to determine the activation energy of
a catalytic reaction, it may be helpful to ensure a new <code class="docutils literal notranslate"><span class="pre">csv</span></code> file is created
each time the temperature setpoint is changed. The <cite>schema</cite> might the look as
follows:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;provenance&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;manual&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;schema_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">},</span><span class="w"></span>
<span class="w">     </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;datagram&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basiccsv&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo.csv&quot;</span><span class="p">]},</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;flow&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">     </span><span class="p">},{</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;datagram&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basiccsv&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;01-temp.csv&quot;</span><span class="p">]}</span><span class="w"></span>
<span class="w">     </span><span class="p">},{</span><span class="w"></span>
<span class="hll"><span class="w">         </span><span class="nt">&quot;datagram&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basiccsv&quot;</span><span class="p">,</span><span class="w"></span>
</span><span class="hll"><span class="w">         </span><span class="nt">&quot;import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;02-temp.csv&quot;</span><span class="p">]},</span><span class="w"></span>
</span><span class="hll"><span class="w">         </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;340 deg C&quot;</span><span class="w"></span>
</span><span class="w">     </span><span class="p">},{</span><span class="w"></span>
<span class="hll"><span class="w">         </span><span class="nt">&quot;datagram&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basiccsv&quot;</span><span class="p">,</span><span class="w"></span>
</span><span class="hll"><span class="w">         </span><span class="nt">&quot;import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;03-temp.csv&quot;</span><span class="p">]},</span><span class="w"></span>
</span><span class="hll"><span class="w">         </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;320 deg C&quot;</span><span class="w"></span>
</span><span class="w">     </span><span class="p">},{</span><span class="w"></span>
<span class="hll"><span class="w">         </span><span class="nt">&quot;datagram&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basiccsv&quot;</span><span class="p">,</span><span class="w"></span>
</span><span class="hll"><span class="w">         </span><span class="nt">&quot;import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;04-temp.csv&quot;</span><span class="p">]},</span><span class="w"></span>
</span><span class="hll"><span class="w">         </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;300 deg C&quot;</span><span class="w"></span>
</span><span class="w">     </span><span class="p">},{</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;datagram&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basiccsv&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;05-temp.csv&quot;</span><span class="p">]}</span><span class="w"></span>
<span class="w">     </span><span class="p">},{</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;datagram&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gctrace&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;import&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;folders&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;./GC/&quot;</span><span class="p">]},</span><span class="w"></span>
<span class="w">         </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;tracetype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fusion&quot;</span><span class="p">}</span><span class="w"></span>
<span class="w">     </span><span class="p">}]</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>From this <cite>schema</cite>, the catalytic conversion can be obtained by combining the
inlet flow and outlet composition (GC) data. The activation energy can then be
calculated by looking up the conversion corresponding to the conditions at the
end of each temperature ramp <cite>step</cite> highlighted above, and performing an
Arrhenius fit.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Further information about the <cite>schema</cite> can be found in the documentation of
the <cite>schema</cite> validator function: <a class="reference internal" href="yadg.core.html#yadg.core.validators.validate_schema" title="yadg.core.validators.validate_schema"><code class="xref py py-func docutils literal notranslate"><span class="pre">yadg.core.validators.validate_schema()</span></code></a>.
The whole <cite>schema</cite> specification is present in the <a class="reference internal" href="yadg.core.html#module-yadg.core.spec_schema" title="yadg.core.spec_schema"><code class="xref py py-mod docutils literal notranslate"><span class="pre">yadg.core.spec_schema</span></code></a>
module.</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="objects.html" class="btn btn-neutral float-left" title="yadg objects" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="object.datagram.html" class="btn btn-neutral float-right" title="What is a datagram" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021 - 2022, yadg authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Other Versions</span>
      v: master
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions"> 
      <script src="../versions.js"></script>
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>